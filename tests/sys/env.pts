import Sys;
import Io;
import test.env as env;

function main() : void {
    env.set("PS_SYS_VALUE", "abc");
    Io.printLine(Sys.env("PS_SYS_VALUE"));

    env.set("PS_SYS_EMPTY", "");
    Io.printLine(Sys.env("PS_SYS_EMPTY").length().toString());

    env.set("PS_SYS_UTF8", "caf√©");
    Io.printLine(Sys.env("PS_SYS_UTF8"));

    try {
        Sys.env("PS_SYS_MISSING");
    } catch (EnvironmentAccessException e) {
        Io.printLine("EnvironmentAccessException");
    }

    try {
        Sys.env("");
    } catch (InvalidEnvironmentNameException e) {
        Io.printLine("InvalidEnvironmentNameException");
    }

    env.setInvalidUtf8("PS_SYS_BAD");
    try {
        Sys.env("PS_SYS_BAD");
    } catch (EnvironmentAccessException e) {
        Io.printLine("EnvironmentAccessException");
    }
}
