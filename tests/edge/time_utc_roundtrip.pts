import Io;
import TimeCivil;

function main() : void {
    bool ok = true;

    CivilDateTime dt0 = TimeCivil.fromEpochUTC(0);
    ok = ok && dt0.year() == 1970 && dt0.month() == 1 && dt0.day() == 1
             && dt0.hour() == 0 && dt0.minute() == 0 && dt0.second() == 0 && dt0.millisecond() == 0;

    int back0 = TimeCivil.toEpochUTC(dt0);
    ok = ok && back0 == 0;

    CivilDateTime dt = CivilDateTime.clone();
    dt.setYear(2024);
    dt.setMonth(2);
    dt.setDay(29);
    dt.setHour(12);
    dt.setMinute(34);
    dt.setSecond(56);
    dt.setMillisecond(789);

    int e = TimeCivil.toEpochUTC(dt);
    CivilDateTime dt2 = TimeCivil.fromEpochUTC(e);
    ok = ok && dt2.year() == 2024 && dt2.month() == 2 && dt2.day() == 29
             && dt2.hour() == 12 && dt2.minute() == 34 && dt2.second() == 56 && dt2.millisecond() == 789;

    ok = ok && TimeCivil.isLeapYear(2000) == true;
    ok = ok && TimeCivil.isLeapYear(1900) == false;
    ok = ok && TimeCivil.isLeapYear(2024) == true;
    ok = ok && TimeCivil.isLeapYear(2023) == false;
    ok = ok && TimeCivil.daysInMonth(2024, 2) == 29;
    ok = ok && TimeCivil.daysInMonth(2023, 2) == 28;
    ok = ok && TimeCivil.daysInMonth(2023, 4) == 30;

    bool caught = false;
    try {
        TimeCivil.daysInMonth(2023, 13);
        ok = false;
    } catch (InvalidDateException ex) {
        caught = true;
    }
    ok = ok && caught;

    Io.printLine(ok.toString());
}
